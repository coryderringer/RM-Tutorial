{% extends "_base.htm" %}
{% block title %}
	Sim 1!!
{% endblock%}


{% block bodycontent %}

<form id="dataform" method="post" action="/WithinSubject">
	<input id="Q3" name="Q3" type="hidden">
	<input id="numbersims" name="numbersims" type="hidden">
	<input id="progressinput" name="progressinput" type="hidden">
	<input id="Submit" onclick="MySubmit()" value="Submit" type="hidden">
</form>


<div class="pg">
	<center>
		<div id="firstrow">
			<div id="between1" style="display:inline-block;margin-right:100px">
				<div class="pg" style="display:inline-block;margin-right:20px;padding:5px;width:200px">
					<IMG src="/static/images/testimage.png" style="width:200px"></IMG>
				</div>
				<div id="ttest1" class="ttest">
					<span id="tspan1">t=1.00</span><br>
					<span id="pspan1">p=.50</span><br>
					<span id="dspan1">d=0.10</span><br>
				</div>
			</div>
			
			<div id="within1" style="display:inline-block">
				<div class="pg" style="display:inline-block;margin-right:20px;padding:5px;width:200px">
					<IMG src="/static/images/testimage.png" style="width:200px"></IMG>
				</div>
				<div id="ttest2" class="ttest">
					<span id="tspan2">t=1.00</span><br>
					<span id="pspan2">p=.50</span><br>
					<span id="dspan2">d=0.10</span><br>
				</div>
			</div>
		</div>
		<br>

		<div id="secondrow" style="display:none">
			<div id="between2" style="display:inline-block;margin-right:100px">
				<div class="pg" style="display:inline-block;margin-right:20px;padding:5px;width:200px">
					<IMG src="/static/images/testimage.png" style="width:200px"></IMG>
				</div>
				<div id="ttest3" class="ttest">
					<span id="tspan1">t=1.00</span><br>
					<span id="pspan1">p=.50</span><br>
					<span id="dspan1">d=0.10</span><br>
				</div>
			</div>
			
			<div id="within2" style="display:inline-block">
				<div class="pg" style="display:inline-block;margin-right:20px;padding:5px;width:200px">
					<IMG src="/static/images/testimage.png" style="width:200px"></IMG>
				</div>
				<div id="ttest4" class="ttest">
					<span id="tspan2">t=1.00</span><br>
					<span id="pspan2">p=.50</span><br>
					<span id="dspan2">d=0.10</span><br>
				</div>
			</div>
		</div>
	</center>	
	<br>

	<div id="Text1">
		<p>To expand on this point, let's look at what each design is actually comparing between the two conditions. On the left we have a between-subjects approach and on the right we have the same datapoints collected in a within-subjects design.</p>

		<div id="Quiz3">
			<p id="Question3">Intuitively, which chart would you say is more convincing (i.e. which shows the Vegetable Condition having a stronger effect?)</p>


			<form id="Q3Answers">
				<input type="radio" name="q3" value="A" id="q3a"><label for="q3a">The between-subjects design</label><br>
				<input type="radio" name="q3" value="B" id="q3b"><label for="q3b">The within-subjects design</label><br>
			</form><br>
			<button id="AnswerButton3" onclick="RecordQuiz3()" style="width:100px">Next</button>
			<br>
			<div id="ResponseDiv3" style=""></div>
		</div>
	</div>

	<div id="AnswerA" style="display:none">
		<p>Oh no, your intuition wasn't right this time! That's okay.</p>
	</div>
	<div id="AnswerB" style="display:none">
		<p>Right!</p>
	</div>
	<div id="Text2" style="display:none">
		<p>This is the first advantage of within subject designs: <i>they're insensitive to the population variance</i>. Look at the wide distribution of weights in each condition for both graphs. With a between subjects design (left side), we're punished statistically by the question we're asking. When we want to know if the difference between the group means is reliably (i.e. significantly) greater than zero, we have to have a context against which to judge the difference. That context is the variation in each group: the wider each group is spread, the more power we lose in a between subjects design.</p>

		<p>Asking a different question with a within subjects design means that the differences within each condition will only affect our statistical power if they affect the consistency of the difference scores (i.e. if they're the result of differences in the effectiveness of the treatment), <i>but they will not affect our power if they're the result of individual differences unrelated to the treatment, which is the case here!</i></p>
	</div>

	<div id="Text3" style="display:none">
		<p>Here we can see that the between subjects design does much better when the population variance is low. With each group more tightly distributed around its mean, it’s easier to tell that there is a real difference between the group means. However, notice that the p value for the within subjects design is just as low. In fact, it is exactly the same as it is above, because within subjects designs are not affected by the population variance like between subjects designs.</p>

		<p>Take a minute or two to play around with this simulator a bit. See what happens when you generate different datasets using the "Resample" button: how often is the within subjects design significant when the between subjects design isn’t? Is that pattern ever reversed?</p>
	</div>

	<button id="ResampleButton" style="width:100px;display:none" onclick="ResampleFunction()">Resample</button>
	
	<button id="NextButton" style="width:100px;display:none">Continue</button>


</div>

<script>





var Q3Outcome = 'unanswered';
var datasets = 1;
var progress = {{progress}};


function RecordQuiz3(){
	Q3Outcome = $('input[name=q3]:checked', '#Q3Answers').val();
	if(Q3Outcome != 'A' & Q3Outcome != 'B'){
		alert('Please make a selection!');
		return
	
	}else if(Q3Outcome == 'A'){
		$('#AnswerA').show();

	}else if (Q3Outcome == 'B'){
		$('#AnswerB').show();
		
	}
	$('#Text1').hide();
	
	// Show response and next button
	$('#Text2, #NextButton').show();
	
	$('#NextButton').click(function(){
		
		// Hide quiz, answers
		$('#Text1, #Text2, #AnswerA, #AnswerB').hide();

		// Show second row and instructions, resample button
		$('#secondrow, #Text3, #ResampleButton').show();
		

		// Next button: move on after simulations
		$('#NextButton').click(MySubmit);
		$('#NextButton').css('display', 'inline-block');
		$('#NextButton').css('float', 'right');	
	
	});
}

function ResampleFunction(){
	// Generate new data
	datasets += 1;
	console.log('Resampling!');

}


function MySubmit(){
	console.log('Submitting!');
	progress +=1;
	$('#Q3').val(Q3Outcome);
	$('#progressinput').val(String(progress));
	$('#numbersims').val(datasets);
	$('#dataform').submit();
}



</script>

{% endblock %}